<!-- templates/cart/view_cart.html -->
{% extends "base.html" %}
{% block content %}
    <h2>Your Shopping Cart</h2>
    {% if cart.items.all %}
        <form method="post" action="{% url 'update_cart' %}">
            {% csrf_token %}
            <ul class="list-group">
                {% for item in cart.items.all %}
                    <li class="list-group-item d-flex justify-content-between align-items-center">
                        <div>
                            <img src="{{ item.product.image.url }}" alt="{{ item.product.name }}"
                                 style="height: 50px; width: 50px; object-fit: cover;">
                            <span>{{ item.product.name }}</span>
                            <span class="badge badge-primary badge-pill">{{ item.product.price }}</span>
                        </div>
                        <div>
                            <input type="number" name="quantity_{{ item.pk }}" value="{{ item.quantity }}" min="1"
                                   style="width: 60px;">
                            <a href="{% url 'remove_from_cart' item.pk %}" class="btn btn-danger btn-sm">Remove</a>
                        </div>
                    </li>
                {% endfor %}
            </ul>
            <button type="submit" class="btn btn-primary mt-3">Update Cart</button>
        </form>
        <a href="{% url 'checkout' %}" class="btn btn-success mt-3">Checkout</a>
    {% else %}
        <p>Your cart is empty.</p>
    {% endif %}
{% endblock %}
